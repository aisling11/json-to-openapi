<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8"/>
		<title>OpenAPI Generator</title>
		<script src="openApiGen.js" type="text/javascript"></script>
		<script>
			function init() {
				//Handle tabs inside JSON textarea
				let txtArea = document.getElementById('JSON');
				txtArea.onkeydown = function(e){
					if(e.keyCode==9 || e.which==9){
					    e.preventDefault();
					    let s = this.selectionStart;
					    this.value = this.value.substring(0,this.selectionStart) + "\t" + this.value.substring(this.selectionEnd);
					    this.selectionEnd = s+1; 
					}
				}
			};
			
		</script>
		<style>
			textarea{
				display: inline-block;
				margin: 10px;
			}

			button{
				display: inline-block;
			}
		</style>
	</head>
	<body onload="init();">
		<h1>OpenAPI Definition Objects Generator</h1>
		<p>Add your JSON mock object to generate openAPI definition objects. In the end, rememeber to:</p>
		<p> * If needed, manually put the "description" type </p>
		<p> * Double check type number's example </p>
		<p> * If you've sent an array mock, correct the output as this only works with object mock</p>
		<textarea id="JSON" rows="20" cols="55" placeholder="Input: Insert JSON object"></textarea>
	  <button type="button" onclick="convert()">Convert</button>
		<textarea readonly id="OpenAPI" rows="20" cols="85" placeholder="Output: Here's your OpenAPI schema"></textarea>
		<br>
		<p>Convert null values to:
			<select id="nullType">
		  		<option value="string" selected="">String</option>
		  		<option value="number">Number</option>
				<option value="integer">Integer</option>
				<option value="boolean">Boolean</option>
			</select>
		</p>
		<p>Json mock example:</p>
		<textarea readonly rows="20" cols="84">
{
	"numbersMock": {
		"smallInt": -20,
		"bigInt": 2147483647,
		"unsafeInt": 9999999999999999,
		"notInt": 12.2
	},
	"stringsMock": {
		"stringTest": "Hello World",
		"isoDate": "1999-12-31",
		"isoDateTime": "1999-12-31T23:59:59Z"
	},
	"objectsMock": {
		"child": {"child": true},
		"childList": [{"child": true}],
		"childMatrix": [[{"child": true}]],
		"nullable": null
	}
}
		</textarea>

		<p>Repository at <a target="_blank" href="https://github.com/aisling11/json-to-openapi">GitHub</a></p>

	</body>
</html>